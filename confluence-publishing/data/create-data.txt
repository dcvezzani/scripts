{"status":"current","title":"DCV Test Document","space":{"key":"PCP"},"body":{"editor":{"value":"<table class=\"wysiwyg-macro\" style=\"background-image: url('https://confluence.churchofjesuschrist.org/plugins/servlet/confluence/placeholder/macro-heading?definition=e21hcmtkb3dufQ&amp;locale=en_US&amp;version=2'); background-repeat: no-repeat;\" data-macro-name=\"markdown\" data-macro-schema-version=\"1\" data-macro-body-type=\"PLAIN_TEXT\" data-mce-resize=\"false\"><tbody><tr><td class=\"wysiwyg-macro-body\"><pre>### SI-191: [BE, FE]] Add additional dynamic page caching<br />These notes aim at providing additional details for the work that still needs to be done for re-establishing caching for SI.  Audiences: deveopment, qa<br /><br />### CMS<br /><br />currently<br />- custom-page usually consists of multiple xml documents<br />- each document may have 0, 1, or more roles<br />- if 0 roles, then assume `edup.perm.Public`<br />- if at least one role is `edup.perm.Publc`, consider xml document cacheable (from cms perspective)<br /><br />new (pending)<br />- include `cacheable` property for each transformed section representing an xml document<br />- ws will determine whether the entire custom-page `cache: true`<br /><br />Caching should return false if<br />- preview context is applied<br />- a custom-page or any sub-element does not include `edup.perm.Publc`<br />  - if there are multiple roles, the \"lowest\" one should take effect<br />  - e.g., Administrator, Public > results in \"Public\"<br /><br />Use Oxygen or WebDav to access custom-page(s) and it's respective sub-documents<br /><br />![](images/41dc07bb-fecf-4a45-9ba8-1d278626e1fb-02.png)<br /><br />from<br />```<br /><role type=\"array\" its:translate=\"no\" xmlns:its=\"http://www.w3.org/2005/11/its\">edup.perm.Administrator</role><br /><role type=\"array\" its:translate=\"no\" xmlns:its=\"http://www.w3.org/2005/11/its\">edup.perm.EmployeeTeachers</role><br />```<br /><br />to<br />```<br /><role type=\"array\" its:translate=\"no\" xmlns:its=\"http://www.w3.org/2005/11/its\">edup.perm.Public</role><br />```<br /><br />Being signed in or not (for CMS) has no effect on `meta.permissions.cache`<br /><br />### WS<br /><br />- after transform page (cms custom-page), if there are any `cache: false` in the tree, update `meta.permissions.cache: false`<br />- if user is not signed in or user is signed in and doesn't have the necessary permissions<br />  - after transform means the employee tile won't show on the homepage<br />  - employee tile won't exist in the tree and `cache: false` won't be found<br />  - `meta.permissions.cache: true`<br /><br />Caching should return false if<br />- preview context is applied<br />- after transform, if any `cache: false` exists in the tree<br /><br />Being signed in or not (for WS) may have effect on `meta.permissions.cache`<br /><br />### FE<br /><br />new (done)<br />- use `meta.permissions.cache` to determine cache-control header<br /></pre></td></tr></tbody></table>","representation":"editor","content":{"id":"147983446"}}},"id":"147983446","type":"page","version":{"number":1,"minorEdit":true,"syncRev":"0.fWPLzXpwwwSJgg7HAhchSKQ.6"},"ancestors":[{"id":"35653536","type":"page"}]}